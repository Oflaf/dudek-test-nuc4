<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skrzydła 3D</title>
    <style>
        /* Ogólne ustawienia strony */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* Kontener główny z obrazkami */
        #container {
            position: relative;
            width: 1058px; /* dostosuj według potrzeb */
            height: 411px; /* dostosuj według potrzeb */
            overflow: hidden;
            margin-bottom: 30px;
        }

        /* Ustawienie warstw */
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: 0.5s; /* Animacja zmiany przezroczystości */
        }

        /* Warstwy kolorowe */
        .color-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 1;
            mix-blend-mode: multiply;
            transition: 0.5s;
        }

        /* Ustawienie warstw wzoru */
        .pattern-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
        }

        /* Przycisk koloru */
        .color-button {
            width: 15px; /* Zmniejszenie przycisków */
            height: 15px; /* Zmniejszenie przycisków */
            border-radius: 50%;
            display: inline-block;
            margin: 5px;
            cursor: pointer;
            border: 1px dotted black; /* Kropkowana obramówka */
            transition: 0.3s, 0.5s;
        }

        /* Powiększenie przycisków na hover */
        .color-button:hover {
            transform: scale(1.49); /* Zwiększenie przycisku */
        }

        /* Kontener przycisków */
        .color-buttons-container {
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Stylowanie dla przycisków w kolumnach */
        .color-buttons-column {
            flex-direction: column;
            align-items: center;
        }

        /* Nagłówki sekcji przycisków */
        .section-title {
            font-size: 1em;
            color: #333;
        }
        /* Aktywny przycisk - solidne obramowanie */
        .color-button.active {
            border: 1px solid black; /* Solidne obramowanie */
            transform: scale(1.32); /* Zwiększenie przycisku */
            transition: 0.2s;


        }

        /* Nagłówek dla wyboru koloru */
        .color-selection-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Nagłówek dla wyboru strefy */
        .zone-selection-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        th {
            font-weight: 100;
        }

    </style>
</head>
<body>

    <div>
        <div id="container">
            <img id="layer" class="layer" src="orca6_w.webp" alt="wzór">
            <img id="pattern1" class="pattern-layer" src="orca6_w1.webp" alt="wzór 1">
            <img id="pattern2" class="pattern-layer" src="orca6_w2.webp" alt="wzór 2">
            <img id="pattern3" class="pattern-layer" src="orca6_w3.webp" alt="wzór 3">
            <img id="pattern4" class="pattern-layer" src="orca6_w4.webp" alt="wzór 4">
            <img id="pattern3" class="pattern-layer" src="orca6_w5.webp" alt="wzór 5">
            <img id="pattern4" class="pattern-layer" src="orca6_w6.webp" alt="wzór 6">

            <div id="colorLayer1" class="color-layer" style="mask: url(#mask1); -webkit-mask: url(#mask1);"></div>
            <div id="colorLayer2" class="color-layer" style="mask: url(#mask2); -webkit-mask: url(#mask2);"></div>
            <div id="colorLayer3" class="color-layer" style="mask: url(#mask3); -webkit-mask: url(#mask3);"></div>
            <div id="colorLayer4" class="color-layer" style="mask: url(#mask4); -webkit-mask: url(#mask4);"></div>
            <div id="colorLayer5" class="color-layer" style="mask: url(#mask5); -webkit-mask: url(#mask5);"></div>
            <div id="colorLayer6" class="color-layer" style="mask: url(#mask6); -webkit-mask: url(#mask6);"></div>
        </div>

        <!-- Kontener przycisków do zmiany kolorów -->
        <div class="color-buttons-container">
            <div class="color-buttons-column">
                <table>
                    <thead>
                        <tr>
                            <th>Strefa</th>
                            <th>Wybór Koloru</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="section-title">1</div>
                            </td>
                            <td>
                                <div id="colorButtons1"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="section-title">2</div>
                            </td>
                            <td>
                                <div id="colorButtons2"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="section-title">3</div>
                            </td>
                            <td>
                                <div id="colorButtons3"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="section-title">4</div>
                            </td>
                            <td>
                                <div id="colorButtons4"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="section-title">5</div>
                            </td>
                            <td>
                                <div id="colorButtons5"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="section-title">6</div>
                            </td>
                            <td>
                                <div id="colorButtons6"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
    </div>

    <svg width="0" height="0">
        <defs>
            <filter id="multiplyFilter">
                <feBlend mode="multiply"/>
            </filter>
            <mask id="mask1">
                <image href="orca6_w1.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>
            <mask id="mask2">
                <image href="orca6_w2.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>
            <mask id="mask3">
                <image href="orca6_w3.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>
            <mask id="mask4">
                <image href="orca6_w4.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>
            <mask id="mask5">
                <image href="orca6_w5.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>
            <mask id="mask6">
                <image href="orca6_w6.webp" x="0" y="0" width="1058px" height="411px"/>
            </mask>

        </defs>
    </svg>

    <script>
        var originalColors = {
            colorLayer1: {},
            colorLayer2: {},
            colorLayer3: {},
            colorLayer4: {},
            colorLayer5: {},
            colorLayer6: {}
        };
    
        // Funkcja do pobierania danych z pliku
        fetch('https://raw.githubusercontent.com/Oflaf/dudek-test/refs/heads/main/kolory.txt')
            .then(response => response.text())
            .then(data => {
                // Wyodrębnienie danych z sekcji Orca6
                var orca6Data = data.split('Orca6')[1];
    
                // Podzielenie danych na linie
                var lines = orca6Data.split('\n');
                var layers = {};
    
                // Przetwarzanie danych z każdej linii
                for (var i = 0; i < lines.length; i++) {
                    var line = lines[i].trim();
                    if (line === '') continue; // Pomiń puste linie
    
                    var parts = line.split(' '); // Podziel na numer warstwy i kolory
                    var layer = parts[0]; // Numer warstwy (np. 1, 2, 3, ...)
                    var colors = parts.slice(1); // Pozostałe elementy to kolory
    
                    // Przekształcenie kolorów z formatu (255,255,255) na rgb(255,255,255)
                    var colorObject = {};
                    colors.forEach((color, index) => {
                        color = color.replace(/[();\s]/g, ''); // Usuwanie nawiasów, średników i spacji
                        color = `rgb(${color})`; // Formatowanie na rgb(x,x,x)
                        var letter = String.fromCharCode(97 + index); // Generowanie liter (a, b, c, ...)
                        colorObject[letter] = color;
                    });
    
                    // Przypisanie kolorów do odpowiedniej warstwy
                    layers[`colorLayer${layer}`] = colorObject;
                }
    
                // Tworzenie przycisków dla każdej warstwy
                Object.keys(layers).forEach(layerId => {
                    var layerColors = layers[layerId];
                    var containerId = `colorButtons${layerId.replace('colorLayer', '')}`;
                    createColorButtons(containerId, layerId, layerColors);
                });
            })
            .catch(error => console.error('Błąd ładowania pliku:', error));
    
        // Funkcja zmieniająca kolor
        function changeColor(layerId, color) {
            var layer = document.getElementById(layerId);
            layer.style.backgroundColor = color;
            originalColors[layerId] = color;
    
            // Deaktywacja wszystkich przycisków w tej strefie
            var containerId = `colorButtons${layerId.replace('colorLayer', '')}`;
            var buttons = document.querySelectorAll(`#${containerId} .color-button`);
            buttons.forEach(button => button.classList.remove('active'));
    
            // Aktywacja klikniętego przycisku
            var clickedButton = document.querySelector(`#${containerId} .color-button[onclick*='${color}']`);
            if (clickedButton) {
                clickedButton.classList.add('active');
            }
        }
    
        // Funkcja podglądu koloru na hover
        function previewColor(layerId, color) {
            var layer = document.getElementById(layerId);
            var originalColor = originalColors[layerId];
            if (!originalColor) {
                originalColors[layerId] = layer.style.backgroundColor;
            }
            layer.style.backgroundColor = color;
        }
    
        // Funkcja resetowania koloru
        function resetColor(layerId) {
            var layer = document.getElementById(layerId);
            layer.style.backgroundColor = originalColors[layerId];
        }
    
        // Funkcja tworząca przyciski kolorów dla danej strefy
        function createColorButtons(containerId, layerId, colors) {
            var container = document.getElementById(containerId);
            container.innerHTML = ''; // Wyczyść kontener przed dodaniem nowych przycisków
    
            for (var colorName in colors) {
                var colorValue = colors[colorName];
                var button = document.createElement('div');
                button.className = 'color-button';
                button.style.backgroundColor = colorValue;
                button.setAttribute('onclick', `changeColor('${layerId}', '${colorValue}')`);
                button.setAttribute('onmouseover', `previewColor('${layerId}', '${colorValue}')`);
                button.setAttribute('onmouseout', `resetColor('${layerId}')`);
                container.appendChild(button);
            }
        }
    </script>
</body>
</html>
